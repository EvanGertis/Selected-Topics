<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>Listing 6.1 Animation by Y. Daniel Liang</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--    <script type="text/javascript" src="jquery-latest.js"></script>-->
<script src="jquery-1.7.2.min.js"></script>
<script src="jquery-ui.min.js"></script>
<script src="jquery.ui.touch-punch.min.js">
</script><script src="jquery.alerts.js"></script> 
<link href="jquery.alerts.css" rel="stylesheet" type="text/css" media="screen" />
    <script type="text/javascript" src="GetElementPosition3.js"></script><script src="jquery.ui.touch-punch.min.js"></script>
    <link rel="stylesheet" type="text/css" href="codecolor1.css" />

<style>
    *:focus {outline: 2px solid blue; outline-offset: 2px;}
    details {padding:3px;}
    </style>

    <script>
      n = 5;
      result = false;
      steps = 10;

      animationSpeed = 500;
      slowAnimationSpeed = 3000;
      lineOffSet = 15;
      highLight = [];
      highLight[0] = new HighLight();
      highLight[0].top = 95;
      highLight[0].left = 62;
      highLight[0].width = 318;

      highLight[1] = new HighLight();
      highLight[1].top = 109;
      highLight[1].left = 60 + 20;
      highLight[1].width = 417;
      
      highLight[2] = new HighLight();
      highLight[2].top = 125;
      highLight[2].left = 60 + 20;
      highLight[2].width = 457;

      highLight[3] = new HighLight();
      highLight[3].top = 169;
      highLight[3].left = 60 + 20;
      highLight[3].width = 304;

      highLight[4] = new HighLight();
      highLight[4].top = 198;
      highLight[4].left = 60 + 20;
      highLight[4].width = 385;
      highLight[4].height = 25;

      highLight[5] = new HighLight();
      highLight[5].top = 243;
      highLight[5].left = 60 + 20;
      highLight[5].width = 232;

      highLight[6] = new HighLight();
      highLight[6].top = 273;
      highLight[6].left = 60 + 20;
      highLight[6].width = 435;
      highLight[6].height = 38;

      highLight[7] = new HighLight();
      highLight[7].top = 314;
      highLight[7].width = 6;
      highLight[7].left = 62;

      highLight[8] = new HighLight();
      highLight[8].top = 314;
      highLight[8].width = 6;
      highLight[8].left = 62;

      highLight[9] = new HighLight();
      highLight[9].top = 314;
      highLight[9].width = 6;
      highLight[9].left = 62;

      highLight[10] = new HighLight();
      highLight[10].top = 314;
      highLight[10].width = 6;
      highLight[10].left = 62;

      explanation = [];
      explanation[0] = new Explanation();
      explanation[0].innerHTML = "The program starts the execution from the main method.";
      explanation[0].top = 75;
      explanation[0].left = 508;

      explanation[1] = new Explanation();
      explanation[1].innerHTML = "The statement assigns " + n + " to variable n.";
      explanation[1].top = 107;
      explanation[1].left = 550;

      explanation[2] = new Explanation();
      explanation[2].innerHTML = "test.";
      explanation[2].top = 107;
      explanation[2].left = 570;

      explanation[3] = new Explanation();
      explanation[3].innerHTML = "The statement will invoke the fib method and assign the return value from the method to nth_fibonacci.";
      explanation[3].top = 117;
      explanation[3].left = 470;
      explanation[3].width = 430;

      explanation[4] = new Explanation();
      explanation[4].innerHTML = "The fibonacci method is invoked";
      explanation[4].top = 130;
      explanation[4].left = 480;
      explanation[4].width = 260;

      explanation[5] = new Explanation();
      explanation[5].innerHTML = "The statement receives an input from the user.";
      explanation[5].top = 245;
      explanation[5].left = 285;
      explanation[5].width = 205;

      explanation[6] = new Explanation();
      explanation[6].innerHTML = "The base case is checked. The statement tests if n is <=0 ";
      explanation[6].top = 247;
      explanation[6].left = 325;
      explanation[6].width = 205;

      explanation[7] = new Explanation();
      explanation[7].innerHTML = "The statement tests if n <= 1.";
      explanation[7].top = 250;
      explanation[7].left = 228;
      explanation[7].width = 205;

      explanation[8] = new Explanation();
      explanation[8].innerHTML = "the call fib(n-1) + fib(n-2) is placed onto the callstack.";
      explanation[8].top = 270;
      explanation[8].left = 228;
      explanation[8].width = 205;

      explanation[9] = new Explanation();

      explanation[9] = new Explanation();
      explanation[9].innerHTML = "The result will be returned from the fibonacci method.";
      explanation[9].top = 330;
      explanation[9].left = 228;
      explanation[9].width = 255;

      explanation[10] = new Explanation();
      explanation[10].innerHTML = "The returned value is assigned to variable nth_fibonacci.";
      explanation[10].top = 118;
      explanation[10].left = 248;
      explanation[10].width = 280;

      commandPrompt = [];
      commandPrompt[0] = new CommandPrompt();
      commandPrompt[0].isVisible = true;
      commandPrompt[0].innerHTML = "";
      commandPrompt[0].top = 75;
      commandPrompt[0].left = 660;
      commandPrompt[0].height = 75;
      commandPrompt[0].width = 260;
      commandPrompt[0].isVisible = false;

      commandPrompt[1] = new CommandPrompt();
      commandPrompt[1].isVisible = false;

      commandPrompt[2] = new CommandPrompt();
      commandPrompt[2].isVisible = false;

      commandPrompt[3] = new CommandPrompt();
      commandPrompt[3].isVisible = false;

      commandPrompt[4] = new CommandPrompt();
      commandPrompt[4].isVisible = false;

      commandPrompt[5] = new CommandPrompt();
      commandPrompt[5].isVisible = false;

      commandPrompt[6] = new CommandPrompt();
      commandPrompt[6].isVisible = false;

      commandPrompt[7] = new CommandPrompt();
      commandPrompt[7].isVisible = false;

      commandPrompt[8] = new CommandPrompt();
      commandPrompt[8].isVisible = false;

      commandPrompt[9] = new CommandPrompt();
      commandPrompt[9].isVisible = false;

      commandPrompt[10] = new CommandPrompt();
      commandPrompt[10].isVisible = false;

      currentLine = 0;

      function init() {
          document.getElementById('startOverButton').style.display = 'none';
          document.getElementById('prevButton').style.display = 'none';
          document.getElementById('nextButton').style.display = 'none';
          document.getElementById('highlight').style.visibility = 'hidden';
          document.getElementById('nextButton').style.visibility = 'hidden';
          document.getElementById('commandPrompt').style.visibility = 'hidden';
          document.getElementById('memory').style.visibility = 'hidden';
          document.getElementById('area').style.visibility = 'hidden';
          document.getElementById('flyingN').style.visibility = 'hidden';
          document.getElementById('flyingResult').style.visibility = 'hidden';
          document.getElementById('flyingReturnValue').style.visibility = 'hidden';
      }

      function step() {
//          pos = getElementPos(document.getElementById('line' + currentLine));
//          $("#explanation").animate({top: explanation[currentLine].top, left: explanation[currentLine].left,
//              width: explanation[currentLine].width}, animationSpeed);

          if (currentLine == 0) {
              document.getElementById('variable').style.visibility = 'hidden';
              document.getElementById('radius').style.visibility = 'hidden';
              document.getElementById('flyingN').style.visibility = 'hidden';
              document.getElementById('flyingN').innerHTML = '';
              document.getElementById('value1').innerHTML = '';
              document.getElementById('prevButton').style.visibility = 'hidden';
              $("#nextButton").focus();
              $("#explanation").animate({top: pos0.y - 45,
                  left: (pos0.x + pos0.w) * 2 / 3,
                  width: 200}, 'fast');
              $("#commandPrompt").animate({top: pos8.y,
                  left: pos8.x + pos8.w + 20, }, 'fast');
              document.getElementById('commandPrompt').style.visibility = 'hidden';
          }
          else if (currentLine == 1) {
              n = tb1;
              explanation[1].innerHTML = "The statement assigns " + n + " to variable n.";

              document.getElementById('variable').style.visibility = 'visible';
              document.getElementById('radius').style.visibility = 'visible';
              document.getElementById('flyingN').style.visibility = 'visible';
              document.getElementById('flyingN').innerHTML = '';
              document.getElementById('value1').innerHTML = '';
              document.getElementById('prevButton').style.visibility = 'visible';
              document.getElementById('prevButton').style.display = 'inline';

              document.getElementById('area').style.visibility = 'hidden';
              document.getElementById('area').style.visibility = 'hidden';

              pos = getElementPos(document.getElementById('line1'));
              $("#explanation").animate({top: pos.y - 5,
                  left: (pos.x + pos.w) + 20,
                  width: 280}, 'fast');
              $("#highlight").animate({top: pos.y, left: pos.x, width: pos.w, height: pos.h}, animationSpeed, function () {
                  posLoc1 = getElementPos(document.getElementById('loc1'));
                  $("#flyingN").css("top", posLoc1.y).css("left", posLoc1.x - 35);
                  document.getElementById("flyingN").innerHTML = n;
                  $("#flyingN").animate({top: value1Top, left: value1Left}, slowAnimationSpeed);
              });
          }
          else if (currentLine == 2) {
              explanation[2].innerHTML = "The statement assigns the return from fib(n) to variable nth_fibonacci.";
              commandPrompt[4].innerHTML = "What is nth_fibonacci? ";
          }
          else if (currentLine == 3) {
              pos = getElementPos(document.getElementById('line' + currentLine));
              $("#explanation").animate({top: pos.y - 25,
                  left: (pos.x + pos.w) + 20,
                  width: 280}, 'fast');
          }
          else if (currentLine == 4) {
explanation[currentLine].innerHTML = "";
                    document.getElementById('explanation').innerHTML = explanation[currentLine].innerHTML;

                    var myArea = " ";
      speak("Check Your Understanding: " + "Note that in all code animation, you can use mouse/finger to move highlight, \nexplanation, output, and Check Your Understanding box freely. Is the \nvalue of k passed to n when invoking fib(n)? Answer Yes or No:");
                    jPrompt("Note that in all code animation, you can use mouse/finger to move highlight, \nexplanation, output, and Check Your Understanding box freely. Is the \nvalue of k passed to nu when invoking fib(n)? Answer Yes or No:", '',
                            'Check Your Understanding', function (r) {
                                if (r) {
                                    myArea = r.trim();
                                }
      response = (myArea.toUpperCase() == "YES" ? "You are correct!" : "Wrong") + ".\nLet us continue to see how it works.";
      speak(response);
      jAlert(response, 'Check Your Understanding',
                                        function (r) {
                                            stepFOUR();
                                        });
                            });
          }
         if (currentLine == 6) {
              document.getElementById('result').style.visibility = 'visible';
              document.getElementById('flyingResult').style.visibility = 'hidden';
              pos = getElementPos(document.getElementById('line' + currentLine));
              $("#explanation").animate({top: pos.y - 5,
                  left: (pos.x + pos.w) + 20,
                  width: 200}, 'fast');
          }
          else if (currentLine == 7) {
              document.getElementById('flyingResult').style.visibility = 'hidden';
              pos = getElementPos(document.getElementById('line' + currentLine));
              $("#explanation").animate({top: pos.y + 5,
                  left: (pos.x + pos.w) + 20,
                  width: 200}, 'fast');

              explanation[currentLine].innerHTML = "The condition (n <= 0) is tested. It is false in this case.";
          }
          else if (currentLine == 8) {
              document.getElementById('flyingResult').style.visibility = 'visible';
              pos = getElementPos(document.getElementById('line8'));
              $("#explanation").animate({top: pos.y + 5,
                  left: (pos.x + pos.w) + 20,
                  width: 200}, 'fast');

              pos = getElementPos(document.getElementById('line9'));
              $("#highlight").animate({top: pos.y, left: pos.x, width: pos.w, height: pos.h}, animationSpeed, function () {
                  posLoc3 = getElementPos(document.getElementById('locNum2'));
                  $("#flyingResult").css("top", posLoc3.y).css("left", posLoc3.x);
                  $("#flyingResult").animate(
                          {top: value3Top + 50 + 5, left: value1Left}, slowAnimationSpeed);
              });

              explanation[currentLine].innerHTML = "fib(n) is assigned to nth_fibonacci.";
          }
          else if (currentLine == 9) {
              pos = getElementPos(document.getElementById('line' + currentLine));
              $("#explanation").animate({top: pos.y + 25,
                  left: (pos.x + pos.w) - 60,
                  width: 200}, 'fast');
              commandPrompt[12].innerHTML = "The value of nth_fibonacci is " + result;
              $("#commandPrompt").animate({top: pos8.y,
                  left: pos8.x + pos8.w + 20, }, 'fast');
          }
          else if (currentLine == 10) {
              console.log("line 10 getting executed");
              pos = getElementPos(document.getElementById('line' + currentLine));
              document.getElementById('explanation').innerHTML = explanation[currentLine].innerHTML;
              $("#explanation").animate({top: pos.y - 5,
                  left: (pos.x + pos.w) + 20,
                  width: 400}, 'fast');
              $("#commandPrompt").animate({top: pos8.y,
                  left: pos8.x + pos8.w + 20, }, 'fast');

              document.getElementById('startButton').style.visibility = 'visible';
              document.getElementById('startButton').style.display = 'inline';
              document.getElementById('startButton').innerHTML = 'Restart Animation';

              document.getElementById('nextButton').style.visibility = 'hidden';
              document.getElementById('nextButton').style.display = 'none';

              document.getElementById('prevButton').style.visibility = 'hidden';
              document.getElementById('prevButton').style.display = 'none';

              document.getElementById('startOverButton').style.visibility = 'hidden';
              document.getElementById('startOverButton').style.display = 'none';

              document.getElementById('note').style.display = 'inline';
              $('#tb1').prop("disabled", false);
              $('#note').show();

          }

          if (currentLine == steps) {
              document.getElementById('nextButton').style.visibility = 'hidden';
              document.getElementById('prevButton').style.visibility = 'hidden';
              document.getElementById('variable').style.visibility = 'hidden';
              document.getElementById('memory').style.visibility = 'hidden';
              document.getElementById('radius').style.visibility = 'hidden';
              document.getElementById('area').style.visibility = 'hidden';
              document.getElementById('startButton').style.visibility = 'visible';
              document.getElementById('startButton').innerHTML = 'Restart Animation';
              document.getElementById('flyingI').style.visibility = 'hidden';
              document.getElementById('flyingNum1').style.visibility = 'hidden';
              document.getElementById('flyingResult').style.visibility = 'hidden';
              document.getElementById('num1').style.visibility = 'hidden';
              document.getElementById('flyingI').innerHTML = '';
              document.getElementById('flyingNum1').innerHTML = '';
              document.getElementById('flyingResult').style.visibility = 'hidden';
//              document.getElementById('highlight').style.visibility = 'hidden';
              document.getElementById('commandPrompt').style.visibility = 'hidden';
//              document.getElementById('explanation').style.visibility = 'hidden';
              document.getElementById('valuek').style.visibility = 'hidden';
              document.getElementById('flyingReturnValue').style.visibility = 'hidden';
$("#startButton").focus();
          }
          else {
              if (true) {
                  document.getElementById('commandPrompt').style.visibility = 'visible';
              }
              else {
                  document.getElementById('commandPrompt').style.visibility = 'hidden';
              }
          }
          console.log('line' + currentLine);
          pos = getElementPos(document.getElementById('line' + currentLine));
          $("#highlight").animate({top: pos.y, left: pos.x, width: pos.w, height: pos.h}, animationSpeed);
              speak(document.getElementById('explanation').innerHTML);
      }
      
      function stepFOUR() {
                        
              document.getElementById('num1').style.visibility = 'hidden';
              document.getElementById('num2').style.visibility = 'hidden';
              document.getElementById('flyingNum1').style.visibility = 'hidden';

              pos = getElementPos(document.getElementById('line' + currentLine));
              $("#explanation").animate({top: pos.y - 20,
                  left: (pos.x + pos.w) + 20,
                  width: 200}, 'fast');
document.getElementById('explanation').innerHTML = "The fib method is invoked";
              speak(document.getElementById('explanation').innerHTML);

      }
    </script>
  
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-89940905-27"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());
  gtag('config', 'UA-89940905-27');
</script>

<script type="text/javascript" src="../logging.js"></script>
</head>



  <body onload="init()" onresize="draw()" class='animationbody'>   
    <div style="text-align: left; margin-top: 1em; margin-bottom: .5em;">
      <span style="padding: 3px">
        <button id ="startButton" type="button">Start Animation</button>
        <button id = "startOverButton" type="button">Reset</button> 
        <button id = "nextButton" type="button">Next</button>
        <button id = "prevButton" type="button">Prev</button>
        <span id = "note" style="text-align: center; font-size: 68%; margin-bottom: 0.2em; color: navy; font-family: Verdana, Helvetica, sans-serif">
          You can change the value of n before starting animation</span>
                <span style="float: right;">
          <button aria-pressed="false" title="Turns Text-to-Speech Output On or Off" class="menulink" style="text-decoration: none;
                  background: white; height:30px; border: 1px solid white;"><img id="bg" src="audioOff.png" alt="Text-to-Speech Off" height="30" width="30" style="margin-bottom:-10px; padding-bottom:-20px;"/>    
          </button>
            </span>
      </span>    
    </div>

    <div id="highlight"></div>
    <div id="explanation" role="alert"></div>
    <div id="commandPrompt">
      <h2 id="commandPromptHeader"> Output </h2>
      <textarea id="commandPromptContent" readonly="readonly" style="text-align: left; font-family: courier; margin-top: -8px; 
                font-size: 80%; color: black; background-color: white; border: 1px solid; border-color: gold"></textarea>
    </div>

    <!--    <div id="commandPrompt">
          <div id="commandPromptHeader">   Command Prompt</div>
          <div id="commandPromptContent">c:\book>java TestMax</div>
        </div>-->

    <div id="memory" style = "background-color: lightyellow;">
      <div id="variable" style = "font-family: times; text-align: left;  background-color: lightyellow;
           position:absolute; top: 50px; left: 133px; font-size: 80%;">
        Variable Name &nbsp;&nbsp;&nbsp  Value in Memory</div>
      <div id ="radius">
        <div id="memory1" style = "font-family: times; text-align: left; font-style: italic;
             position:absolute; top: 70px; left: 133px; font-size: 80%;">
          &nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbspn</div> 
        <div id="value1" style = "font-family: courier; text-align: center; 
             border: 1px solid #37826C; width: 80px; top: 70px; left: 133px; height: 20px;
             position:absolute;  font-size: 80%;"></div> 
      </div>
      <div id ="area">
        <div id="memory2" style = "font-family: times; text-align: left;  font-style: italic;
             position:absolute; top: 90px; left: 133px; font-size: 80%;">
          &nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbspj</div> 
        <div id="value2" style = "font-family: courier; text-align: center;  
             border: 1px solid #37826C; width: 80px; top: 90px; left: 133px; height: 20px;
             position:absolute;  font-size: 80%;"></div>
      </div>
      <div id ="valuek">
        <div id="memory6" style = "font-family: times; text-align: left;  font-style: italic;
             position:absolute; top: 110px; left: 133px; font-size: 80%;">
          &nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbspk</div> 
        <div id="value6" style = "font-family: courier; text-align: center;  
             border: 1px solid #37826C; width: 80px; top: 110px; left: 133px; height: 20px;
             position:absolute;  font-size: 80%;"></div>
      </div>
    </div>

    <div id="flyingN" style = "font-family: courier; text-align: center; 
         width: 80px; top: 187px; left: 100px; height: 20px; color:#EB0D1B; font-weight: bold;
         position:absolute;  font-size: 80%;"></div> 
         
    <div id="flyingNum1" style = "font-family: courier; text-align: center; 
         width: 80px; top: 75px; left: 133px; height: 20px; color:#EB0D1B; font-weight: bold;
         position:absolute;  font-size: 80%;"></div> 

    <div id="flyingResult" style = "font-family: courier; text-align: center; 
         width: 80px; top: 95px; left: 133px; height: 20px; color:#EB0D1B; font-weight: bold;
         position:absolute;  font-size: 80%;"></div> 

    <div id="flyingReturnValue" style = "font-family: courier; text-align: center; 
         width: 80px; top: 95px; left: 133px; height: 20px; color:#EB0D1B; font-weight: bold;
         position:absolute;  font-size: 80%;"></div> 

    <div id = "program" style="border: 1px solid #EB0D1B; font-family: courier; font-size: 100.5%; margin: 0px auto; text-align: left">
      <pre>
  1&nbsp;&nbsp;<span class = "keyword">public</span> <span class = "keyword">class</span> TestMax {
  2&nbsp;&nbsp;  <span class = "comment">/** Main method */</span>
  3&nbsp;&nbsp;  <span id="line0"><span class = "keyword">public</span> <span class = "keyword">static</span> <span class = "keyword">void</span> main(String[] args) {</span>
  4&nbsp;&nbsp;    <span id="line1"><span class = "keyword">int</span> n = <span class = "constant"><span id="loc1"><input id="tb1" type="text" value="5" style="z-index: 10; width:18px; color: #EB0D1B"></span></span>;</span>
  6&nbsp;&nbsp;    <span id="line10"><span class = "keyword">int</span> nth_fibonacci = <span id="line4"><span id="loc5">fib(n)</span>;</span></span>
  7&nbsp;&nbsp;    <span id="line12">System.out.println(<span class = "literal">"The nth fibonacci number is "</span> + nth_fibonacci);</span>
  9&nbsp;&nbsp;  <span id="line13">}</span>
 10&nbsp;&nbsp;
 11&nbsp;&nbsp;  <span class = "comment">/** Return the nth fibonacci number */</span>
 12&nbsp;&nbsp;  <span id="line3"><span class = "keyword">public</span> <span class = "keyword">static</span> <span class = "keyword">int</span> fibonacci(<span class = "keyword">int</span> n) {</span>
 13&nbsp;&nbsp;    <span id="line6"><span class = "keyword">if</span>(n &lt;&equals; 1)</span>
 14&nbsp;&nbsp;        <span id="line7"><span class = "keyword">return</span> 1;</span>
 15&nbsp;&nbsp;   
 16&nbsp;&nbsp;    <span id="line8"><span class = "keyword">return fib(n-1) + fib(n-2);</span>
 17&nbsp;&nbsp;  }
 18&nbsp;&nbsp;}
      </pre>

    </div>

    <script type="text/javascript">
      $("#nextButton").click(function () {
          currentLine = currentLine + 1;
          step();
      });

      $("#prevButton").click(function () {
          if (currentLine == 10 || currentLine == 9) {
              currentLine = 7;
          }
          else {
              currentLine = currentLine - 1;
          }
          step();
      });

      $("#startOverButton").click(function () {
          startOver();
          $("#startButton").focus();
      });

      function startOver() {
          init();
          document.getElementById('nextButton').style.display = 'none';
          document.getElementById('startOverButton').style.display = 'none';
          document.getElementById('prevButton').style.display = 'none';
          document.getElementById('memory').style.visibility = 'hidden';
          document.getElementById('radius').style.visibility = 'hidden';
          document.getElementById('area').style.visibility = 'hidden';
          document.getElementById('startButton').style.visibility = 'visible';
          document.getElementById('startButton').style.display = 'inline';
          document.getElementById('startButton').innerHTML = 'Restart Animation';
          document.getElementById('flyingN').style.visibility = 'hidden';
          document.getElementById('flyingNum1').style.visibility = 'hidden';
          document.getElementById('variable').style.visibility = 'hidden';
          document.getElementById('flyingN').innerHTML = '';
          document.getElementById('explanation').style.visibility = 'hidden';
          document.getElementById('highlight').style.visibility = 'hidden';
          document.getElementById('commandPrompt').style.visibility = 'hidden';
//          document.getElementById('explanation').style.visibility = 'hidden';
          currentPromptContent = "";
          currentLine = 0;
          finished = false;
          $('#tb1').prop("disabled", false);
          $('#note').show();
      }

      $("#startButton").click(function () {
          currentLine = 0;
          pos1 = getElementPos(document.getElementById('line1'));
          pos0 = pos = getElementPos(document.getElementById('line0'));
          pos8 = getElementPos(document.getElementById('line8'));
          pos5 = getElementPos(document.getElementById('line0'));

          document.getElementById('variable').style.top = pos1.y - 50 + 'px';
          document.getElementById('memory1').style.top = pos1.y - 30 + 'px';
          document.getElementById('value1').style.top = pos1.y - 30 + 'px';
          document.getElementById('value2').style.top = pos1.y - 30 + 20 + 'px';
          document.getElementById('memory6').style.top = pos1.y - 10 + 20 + 'px';
          document.getElementById('value6').style.top = pos1.y - 10 + 20 + 'px';
        //   document.getElementById('value3').style.top = pos5.y - 20 + 20 + 'px';
        //   document.getElementById('value4').style.top = pos5.y + 20 + 'px';

          document.getElementById('variable').style.left = pos.x + pos.w + 30 + 'px';
          document.getElementById('memory1').style.left = pos.x + pos.w + 30 + 'px';

          variableLeft = pos.x + pos.w + 30;
          value1Left = pos.x + pos.w + 30 + 95;
          value1Top = pos.y - 30 + 20;
          document.getElementById('value1').style.left = pos.x + pos.w + 30 + 95 + 'px';
          document.getElementById('memory2').style.left = pos.x + pos.w + 30 + 'px';
          document.getElementById('value2').style.left = value1Left + 'px';
          document.getElementById('memory6').style.left = pos.x + pos.w + 30 + 'px';
          document.getElementById('value6').style.left = value1Left + 'px';
        //   document.getElementById('memory3').style.left = pos5.x + pos5.w + 20 + 'px';
        //   document.getElementById('memory4').style.left = pos5.x + pos5.w + 20 + 'px';
          value3Left = pos5.x + pos5.w + 30 + 85;
          value3Top = pos5.y - 30 + 20;
        //   document.getElementById('value3').style.left = value1Left + 'px';
        //   document.getElementById('value4').style.left = value1Left + 'px';

          $("#flyingNum1").css('top', value1Top);
          $("#flyingNum1").css('left', value1Left);

          $("#highlight").animate({top: pos.y, left: pos.x, width: pos.w, height: pos.h}, 'fast');
          $("#explanation").animate({top: pos0.y - 45,
              left: (pos0.x + pos0.w) * 2 / 3,
              width: 200}, 'fast');
          $("#commandPrompt").animate({top: pos8.y,
              left: pos8.x + pos8.w + 20, }, 'fast');

          document.getElementById('explanation').innerHTML = explanation[currentLine].innerHTML;
          document.getElementById('commandPromptContent').innerHTML = commandPrompt[currentLine].innerHTML;

          document.getElementById('startButton').style.display = 'none';
          document.getElementById('nextButton').style.display = 'inline';

          document.getElementById('startButton').style.visibility = 'hidden';
          document.getElementById('nextButton').style.visibility = 'visible';
          document.getElementById('commandPrompt').style.visibility = 'hidden';

          document.getElementById('highlight').style.visibility = 'visible';
          document.getElementById('explanation').style.visibility = 'visible';

          tb1 = parseInt($('#tb1').val());
          $('#tb1').prop("disabled", true);
          $('#note').hide();

          document.getElementById('startOverButton').style.visibility = 'visible';
          document.getElementById('startOverButton').style.display = 'inline';
              speak(document.getElementById('explanation').innerHTML);
$("#nextButton").focus();
      });
    </script>
<script src="//cdnjs.cloudflare.com/ajax/libs/materialize/0.95.1/js/materialize.min.js"></script>
   <script>
   
//    $(function(){
//  if ('speechSynthesis' in window) {
//    speechSynthesis.onvoiceschanged = function() {
//      var $voicelist = $('#voices');
//
//      if($voicelist.find('option').length == 0) {
//        speechSynthesis.getVoices().forEach(function(voice, index) {
//          var $option = $('<option>')
//          .val(index)
//          .html(voice.name + (voice.default ? ' (default)' :''));
//
//          $voicelist.append($option);
//        });
//
//        $voicelist.material_select();
//      }
//    }
//
//    $('#speak3').click(function(){
//      var text = $('#message').val();
//      speak(text);
//    })
//  } else {
//    $('#modal1').openModal();
//  }
//});     

audioOn = false;
$(function() {
  $('.menulink').click(function(){
    if (audioOn) {
      $("#bg").attr('src',"audioOff.png");  
      $("#bg").attr('alt',"Text-to-Speech Off");  
      $("#bg").attr('aria-pressed',"false");  
      audioOn = false;
    }
    else {
      $("#bg").attr('src',"audioOn.png");
      $("#bg").attr('alt',"Text-to-Speech On");
      $("#bg").attr('aria-pressed',"true");
      audioOn = true;
    }
    return false;
  });
});
   </script>   
  </body>
</html>